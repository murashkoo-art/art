import{_ as x,u as b,g as f,h as g,w as i,b as t,e as l,f as m,c as v,i as y,d as u,t as h,B as k,k as S,r as P,l as B,o as p}from"./app-B9F_XcfL.js";import{A as U}from"./AuthLayout-Wf_n5EVN.js";import{I as n}from"./InputField-DS6hZIbH.js";const N={class:"form-row"},q={class:"form-row-x1"},A={class:"form-row-x1"},C={class:"form-row-x1"},I={class:"form-row-x1"},L={key:0,class:"error-message"},R={class:"form-row-x1"},D={__name:"Register",setup(E){const w=B(),d=b(),s=f({first_name:"",last_name:"",username:"",email:"",password:"",confirmPassword:""}),r=f({first_name:"",last_name:"",username:"",email:"",password:"",confirmPassword:""}),_=()=>{let o=!0;return Object.keys(r).forEach(e=>r[e]=""),s.email?/\S+@\S+\.\S+/.test(s.email)||(r.email="Электронная почта недействительна",o=!1):(r.email="Требуется ввести электронную почту",o=!1),s.password?s.password.length<6&&(r.password="Пароль должен состоять как минимум из 6 символов.",o=!1):(r.password="Требуется ввести пароль",o=!1),s.password!==s.confirmPassword&&(r.confirmPassword="Пароли не совпадают",o=!1),o},c=async()=>{if(!_())return;const o={email:s.email,password:s.password,first_name:s.first_name||void 0,last_name:s.last_name||void 0};(await d.register(o)).success&&w.push("/profile")};return(o,e)=>{const V=P("router-link");return p(),g(U,{title:"Зарегистрироваться",subtitle:"Зарегистрируйтесь, чтобы начать.",maxWidth:"500px"},{footer:i(()=>[t("p",null,[e[8]||(e[8]=m("У вас уже есть аккаунт? ",-1)),l(V,{to:"/login"},{default:i(()=>[...e[7]||(e[7]=[m("Войти",-1)])]),_:1})])]),default:i(()=>[t("form",{onSubmit:S(c,["prevent"]),class:"auth-form"},[t("div",N,[l(n,{modelValue:s.first_name,"onUpdate:modelValue":e[0]||(e[0]=a=>s.first_name=a),type:"text",label:"Имя",placeholder:"Введите ваше имя",error:r.first_name},null,8,["modelValue","error"]),l(n,{modelValue:s.last_name,"onUpdate:modelValue":e[1]||(e[1]=a=>s.last_name=a),type:"text",label:"Фамилия",placeholder:"Введите вашу фамилию",error:r.last_name},null,8,["modelValue","error"])]),t("div",q,[l(n,{modelValue:s.email,"onUpdate:modelValue":e[2]||(e[2]=a=>s.email=a),type:"email",label:"Электронная почта",placeholder:"Введите свой адрес электронной почты",error:r.email,required:""},null,8,["modelValue","error"])]),t("div",A,[l(n,{modelValue:s.password,"onUpdate:modelValue":e[3]||(e[3]=a=>s.password=a),type:"password",label:"Пароль",placeholder:"Создать пароль",error:r.password,required:""},{hint:i(()=>[...e[5]||(e[5]=[m(" Длина текста должна составлять не менее 6 символов. ",-1)])]),_:1},8,["modelValue","error"])]),t("div",C,[l(n,{modelValue:s.confirmPassword,"onUpdate:modelValue":e[4]||(e[4]=a=>s.confirmPassword=a),type:"password",label:"Подтвердите пароль",placeholder:"Подтвердите ваш пароль",error:r.confirmPassword,required:""},null,8,["modelValue","error"])]),t("div",I,[u(d).error?(p(),v("div",L,h(u(d).error),1)):y("",!0)]),t("div",R,[l(k,{type:"submit",loading:u(d).isLoading,disabled:u(d).isLoading,fullWidth:""},{default:i(()=>[...e[6]||(e[6]=[m(" Зарегистрироваться ",-1)])]),_:1},8,["loading","disabled"])])],32)]),_:1})}}},M=x(D,[["__scopeId","data-v-a0263139"]]);export{M as default};
