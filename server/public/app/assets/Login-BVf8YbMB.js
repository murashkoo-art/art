import{_ as v,u as V,g as p,h as k,w as i,b as t,e as d,c as _,i as y,j as x,v as S,f as m,r as h,d as n,B,t as E,k as L,l as q,o as f}from"./app-B9F_XcfL.js";import{A as C}from"./AuthLayout-Wf_n5EVN.js";import{I as b}from"./InputField-DS6hZIbH.js";const N={class:"form-options"},A={class:"remember-me"},I={key:0,class:"error-message"},P={__name:"Login",setup(U){const c=q(),a=V(),s=p({email:"",password:"",remember:!1}),r=p({email:"",password:""}),w=()=>{let o=!0;return Object.keys(r).forEach(e=>r[e]=""),s.email?/\S+@\S+\.\S+/.test(s.email)||(r.email="Email is invalid",o=!1):(r.email="Email is required",o=!1),s.password?s.password.length<6&&(r.password="Password must be at least 6 characters",o=!1):(r.password="Password is required",o=!1),o},g=async()=>{if(!w())return;(await a.login(s.email,s.password)).success&&c.push("/profile")};return(o,e)=>{const u=h("router-link");return f(),k(C,{title:"Добро пожаловать",subtitle:"Войдите в свой аккаунт"},{footer:i(()=>[t("p",null,[e[7]||(e[7]=m("У вас нет аккаунта? ",-1)),d(u,{to:"/register"},{default:i(()=>[...e[6]||(e[6]=[m("Зарегистрироваться",-1)])]),_:1})])]),default:i(()=>[t("form",{onSubmit:L(g,["prevent"]),class:"auth-form"},[d(b,{modelValue:s.email,"onUpdate:modelValue":e[0]||(e[0]=l=>s.email=l),type:"email",label:"Email",placeholder:"Введите свой адрес электронной почты",error:r.email,required:""},null,8,["modelValue","error"]),d(b,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=l=>s.password=l),type:"password",label:"Password",placeholder:"Введите свой пароль",error:r.password,required:""},null,8,["modelValue","error"]),t("div",N,[t("div",A,[x(t("input",{type:"checkbox",id:"remember","onUpdate:modelValue":e[2]||(e[2]=l=>s.remember=l),class:"checkbox"},null,512),[[S,s.remember]]),e[3]||(e[3]=t("label",{for:"remember"},"Запомнить меня",-1))]),d(u,{to:"/forgot-password",class:"forgot-password"},{default:i(()=>[...e[4]||(e[4]=[m(" Забыли пароль? ",-1)])]),_:1})]),d(B,{type:"submit",loading:n(a).isLoading,disabled:n(a).isLoading,fullWidth:""},{default:i(()=>[...e[5]||(e[5]=[m(" Войти ",-1)])]),_:1},8,["loading","disabled"]),n(a).error?(f(),_("div",I,E(n(a).error),1)):y("",!0)],32)]),_:1})}}},M=v(P,[["__scopeId","data-v-ede4ac4e"]]);export{M as default};
